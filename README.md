# Abyss Alchemy - Water Sort Rogue

**Abyss Alchemy（錬金術の深淵）** は、定番の「ウォーターソートパズル」にローグライク要素を取り入れた、スリリングなHTML5ゲームです。

液体を移し替え、「圧力」を管理し、錬金術のアーティファクトを駆使して深淵（アビス）の奥底を目指して生き残りましょう。

## 🎮 ゲーム概要

論理パズルである従来のウォーターソートとは異なり、**Abyss Alchemy** にはリソース管理とサバイバルの要素があります。液体を注ぐたびに **「圧力（Pressure）」** が上昇します。圧力ゲージが最大になるとダメージを受けます。HP、エッセンス（通貨）、そして変異（スキル）を管理しながら、できるだけ多くの階層（フロア）を生き延びることが目標です。

### 主な特徴

- **ローグライク進行:** 階層が進むごとに難易度が上昇する無限フロア制。
    
- **圧力システム:** 1手ごとに圧力が上昇。最大になるとHPを失います。
    
- **黒インク（Obsidian）:** 黒い液体は4マス分揃うと「蒸発」し、チューブが即座に空になります。
    
- **変異（Mutations/Perks）:** フロアクリアごとに永続的なパッシブ効果を選択し、独自の戦略を構築できます。
    
- **ショップとアイテム:** エッセンスを使って、使い切りの便利な道具（スポイト、分離機など）やステータス強化を購入できます。
    
- **レスポンシブデザイン:** デスクトップ（マウス/キーボード）とモバイル（タッチ操作）の両方でプレイ可能。
    
- **バイリンガル対応:** ゲーム内でいつでも英語と日本語を切り替えられます。
    

## 🕹️ 操作方法

|アクション|マウス / タッチ|キーボード|
|---|---|---|
|**チューブ選択**|クリック / タップ|`←` `→` 矢印 + `Enter` / `Space`|
|**注ぐ**|対象をクリック / タップ|`←` `→` 矢印 + `Enter` / `Space`|
|**一手戻る (Undo)**|Undoボタンをクリック|`Backspace` または `Z`|
|**アイテム使用**|アイテムアイコンをクリック|-|

## ⚗️ コアメカニクス（ルール）

### 1. 基本ルール

- チューブ内の色のついた液体を、すべて同じ色でまとまるように移し替えます。
    
- 液体は **「同じ色の上」** または **「空のチューブ」** にのみ注ぐことができます。
    
- 注ぎ先のチューブには十分な空きスペースが必要です。
    

### 2. 圧力 (Pressure) と HP

- **圧力:** 液体を移動させるたびに **1** 上昇します。
    
- **オーバーロード:** 圧力ゲージが満タン（初期値: 14）になると、ゲージは0にリセットされますが、代償として **HPが1減少** します。
    
- **ゲームオーバー:** HPが0になると探索終了です。
    

### 3. 黒インク (Obsidian)

- **黒インク（黒い液体）** には特殊な性質があります。
    
- 1つのチューブ内で黒インクが4マス分揃うと、**完全に蒸発** し、そのチューブは空になります。
    
- 空きスペースを作るための重要なメカニズムです。
    

### 4. エッセンス (Essence) とショップ

- **エッセンス (✨):** フロアクリアや特定の色（琥珀色など）を完成させることで得られる通貨です。
    
- **ショップ:** フロア移動の合間にアクセスできます。消費アイテムの購入やHPの回復が可能です。
    

### 5. 変異 (Mutations / Perks)

フロアをクリアするたびに、ランダムに提示される3つの変異から1つを選んで獲得します。

- **触媒反応 (Catalyst):** 色を完成させた際、圧力を大幅に下げる。
    
- **抽出効率 (Efficiency):** 色完成時、確率でエッセンスを追加獲得。
    
- **虚空の盾 (Void Shield):** 圧力ダメージを受けた際、確率で無効化する。
    
- **逆流制御 (Reflux):** 各フロア開始時、無料でUndoができる回数を付与。
    

## 🛠️ インストールと実行方法

このゲームは **シングルファイル HTML アプリケーション** です。ビルドプロセスやサーバーは不要です。

### 遊び方

1. https://mryooo.github.io/wsr/ にアクセスします。
    
2. 最新のWebブラウザ（Chrome, Firefox, Safari, Edgeなど）で開きます。
    
3. すぐにプレイできます！
    

### 公開（ホスティング）

`index.html` を任意の静的ホスティングサービス（GitHub Pages, Vercel, Netlify, または一般的なレンタルサーバー）にアップロードするだけで公開できます。

## 💻 技術的詳細

- **エンジン:** Vanilla JavaScript (ES6+)
    
- **スタイリング:** Tailwind CSS (CDN経由)
    
- **データ保存:** `localStorage` を使用して進行状況を自動保存します。ブラウザを閉じても続きから遊べます。
    
- **レンダリング:** DOMベースのレンダリング（Canvas不使用）。CSS transformによる軽量なアニメーション。
    

## 🔮 今後のロードマップ / カスタマイズ

ゲームバランスを調整したい場合は、ソースコード内の `gameState` オブジェクトや `PERKS` 定数を検索してください。

- **難易度調整:** `gameState` 内の `pressureMax` や `hp` を変更。
    
- **色の追加:** `COLOR_POOL` 配列を編集。
    
- **新しいPerk:** `PERKS` 定数に新しいエントリーを追加。
